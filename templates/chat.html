    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <title>FasalDrishti AI - Chat Assistant</title>
        
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://unpkg.com/lucide@latest"></script>
        <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Public+Sans:wght@500;700;800&display=swap" rel="stylesheet">

        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        fontFamily: {
                            sans: ['"Public Sans"', 'sans-serif'],
                            display: ['"Archivo Black"', 'sans-serif'],
                        },
                        colors: {
                            neo: {
                                green: '#00D664',
                                black: '#121212',
                                white: '#FFFFFF',
                                red: '#FF4D4D',
                                gray: '#F3F4F6',
                                orange: '#FF9F1C'
                            }
                        },
                        boxShadow: {
                            'hard': '4px 4px 0px 0px #121212',
                            'hard-sm': '2px 2px 0px 0px #121212',
                        },
                        borderWidth: {
                            '3': '3px',
                        },
                        animation: {
                            'pop-in': 'popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
                            'pulse-slow': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        },
                        keyframes: {
                            popIn: {
                                '0%': { transform: 'scale(0.9)', opacity: '0' },
                                '100%': { transform: 'scale(1)', opacity: '1' }
                            }
                        }
                    }
                }
            }
        </script>

        <style>
            body { 
                background-color: #F3F4F6;
                color: #121212;
                background-image: radial-gradient(#d1d5db 1px, transparent 1px);
                background-size: 20px 20px;
            }

            .no-scrollbar::-webkit-scrollbar { display: none; }

            /* Chat Bubble Styles */
            .bubble-bot {
                background-color: #FFFFFF;
                border: 3px solid #121212;
                border-radius: 0px 16px 16px 16px;
                box-shadow: 4px 4px 0px 0px #121212;
            }
            
            .bubble-user {
                background-color: #121212;
                color: #FFFFFF;
                border-radius: 16px 0px 16px 16px;
                box-shadow: 2px 2px 0px 0px #00D664;
            }

            /* Typing Dot Animation */
            .typing-dot {
                width: 6px;
                height: 6px;
                background-color: #121212;
                border-radius: 50%;
                animation: typing 1.4s infinite ease-in-out both;
            }
            .typing-dot:nth-child(1) { animation-delay: -0.32s; }
            .typing-dot:nth-child(2) { animation-delay: -0.16s; }
            @keyframes typing {
                0%, 80%, 100% { transform: scale(0); }
                40% { transform: scale(1); }
            }
        </style>
    </head>
    <body class="h-[100dvh] w-full flex justify-center items-center font-sans overflow-hidden">

        <div class="relative w-full max-w-sm h-full shadow-2xl overflow-hidden flex flex-col bg-[#F3F4F6]">

            <header class="bg-white/90 backdrop-blur-md border-b-3 border-neo-black px-5 py-4 z-30 shrink-0 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-neo-green border-2 border-neo-black rounded-full flex items-center justify-center relative">
                        <i data-lucide="bot" class="w-6 h-6 text-white"></i>
                        <span class="absolute bottom-0 right-0 w-3 h-3 bg-neo-green border-2 border-neo-black rounded-full animate-pulse"></span>
                    </div>
                    <div>
                        <h1 class="font-display text-lg uppercase tracking-tight leading-none text-neo-black">Fasal Assistant</h1>
                        <p class="text-[10px] font-bold text-green-600 uppercase tracking-widest">‚óè Online Now</p>
                    </div>
                </div>
                <button onclick="clearChat()" class="p-2 border-2 border-transparent hover:border-neo-black rounded-md transition-all">
                    <i data-lucide="trash-2" class="w-5 h-5 text-neo-red"></i>
                </button>
            </header>

            <main class="flex-1 overflow-y-auto no-scrollbar p-5 space-y-6 pb-4" id="chat-container">
                
                <div class="flex gap-3 animate-pop-in">
                    <div class="bubble-bot p-4 max-w-[85%]">
                        <p class="text-xs font-bold leading-relaxed mb-3">
                            Namaste Farmer! üôè I am your AI assistant. How can I help your harvest today?
                        </p>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="sendQuickReply('Check Weather')" class="bg-blue-50 border-2 border-neo-black px-3 py-1.5 rounded-full text-[10px] font-black hover:bg-neo-green hover:text-white transition-colors">
                                üåß Check Weather
                            </button>
                            <button onclick="sendQuickReply('Tomato Price')" class="bg-orange-50 border-2 border-neo-black px-3 py-1.5 rounded-full text-[10px] font-black hover:bg-neo-green hover:text-white transition-colors">
                                üçÖ Tomato Price
                            </button>
                            <button onclick="sendQuickReply('Crop Disease')" class="bg-red-50 border-2 border-neo-black px-3 py-1.5 rounded-full text-[10px] font-black hover:bg-neo-green hover:text-white transition-colors">
                                ü¶† Crop Disease
                            </button>
                        </div>
                    </div>
                </div>

                </main>

            <div id="typing-indicator" class="hidden px-5 pb-4">
                <div class="bg-white border-2 border-neo-black px-4 py-3 rounded-full inline-flex gap-1 shadow-hard-sm w-fit">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>

            <div class="bg-white border-t-3 border-neo-black p-4 shrink-0 z-40">
                <div class="flex gap-2">
                    <button onclick="triggerCamera()" class="bg-gray-100 border-3 border-neo-black p-3 shadow-hard-sm active:shadow-none active:translate-y-1 transition-all">
                        <i data-lucide="camera" class="w-5 h-5 text-neo-black"></i>
                    </button>
                    
                    <input type="text" id="user-input" placeholder="Ask about crops, weather..." 
                        class="flex-1 bg-white border-3 border-neo-black px-4 font-bold text-sm outline-none placeholder-gray-400"
                        onkeypress="handleEnter(event)">
                    
                    <button onclick="sendMessage()" class="bg-neo-black text-white border-3 border-neo-black p-3 shadow-hard-sm active:shadow-none active:translate-y-1 transition-all">
                        <i data-lucide="send" class="w-5 h-5"></i>
                    </button>
                </div>
                <p class="text-[9px] font-bold text-gray-400 text-center mt-2 uppercase tracking-wider">
                    <i data-lucide="mic" class="w-3 h-3 inline align-middle mr-1"></i> Tap mic to speak (Hindi/English)
                </p>
            </div>

            <nav class="bg-white border-t-3 border-neo-black h-20 shrink-0 grid grid-cols-5 relative z-40">
                <button onclick="window.location.href='index.html'" class="flex flex-col items-center justify-center gap-1 active:bg-gray-50 group">
                    <i data-lucide="home" class="w-5 h-5 text-gray-400 group-hover:text-neo-black transition-colors"></i>
                    <span class="text-[9px] font-bold text-gray-400 uppercase group-hover:text-neo-black transition-colors">Home</span>
                </button>
                <button onclick="window.location.href='index.html'" class="flex flex-col items-center justify-center gap-1 active:bg-gray-50 group">
                    <i data-lucide="scan-line" class="w-5 h-5 text-gray-400 group-hover:text-neo-black transition-colors"></i>
                    <span class="text-[9px] font-bold text-gray-400 uppercase group-hover:text-neo-black transition-colors">Analyze</span>
                </button>
                <button onclick="window.location.href='news.html'" class="flex flex-col items-center justify-center gap-1 active:bg-gray-50 group">
                    <i data-lucide="newspaper" class="w-5 h-5 text-gray-400 group-hover:text-neo-black transition-colors"></i>
                    <span class="text-[9px] font-bold text-gray-400 uppercase group-hover:text-neo-black transition-colors">News</span>
                </button>
                <button class="flex flex-col items-center justify-center gap-1 bg-gray-50">
                    <i data-lucide="bot" class="w-5 h-5 text-neo-green stroke-[3]"></i>
                    <span class="text-[9px] font-black text-neo-black uppercase">Chat</span>
                </button>
                <button onclick="window.location.href='profile.html'" class="flex flex-col items-center justify-center gap-1 active:bg-gray-50 group">
                    <i data-lucide="user" class="w-5 h-5 text-gray-400 group-hover:text-neo-black transition-colors"></i>
                    <span class="text-[9px] font-bold text-gray-400 uppercase group-hover:text-neo-black transition-colors">Profile</span>
                </button>
            </nav>

            <input type="file" id="img-upload" class="hidden" accept="image/*">

        </div>

        <script>
            lucide.createIcons();

            const chatContainer = document.getElementById('chat-container');
            const userInput = document.getElementById('user-input');
            const typingIndicator = document.getElementById('typing-indicator');

            // 1. Send Message Logic
            function sendMessage() {
                const text = userInput.value.trim();
                if (!text) return;

                // Add User Message
                appendMessage('user', text);
                userInput.value = '';
                
                // Show Typing & Process Reply
                showTyping();
                
                // Artificial Delay for realism
                setTimeout(() => {
                    hideTyping();
                    const reply = generateAIResponse(text);
                    appendMessage('bot', reply);
                }, 1500);
            }

            // 2. Quick Reply Handler
            function sendQuickReply(text) {
                userInput.value = text;
                sendMessage();
            }

            // 3. Append Message to DOM
            function appendMessage(sender, text) {
                const div = document.createElement('div');
                div.className = `flex gap-3 animate-pop-in ${sender === 'user' ? 'justify-end' : ''}`;
                
                if (sender === 'user') {
                    div.innerHTML = `
                        <div class="bubble-user p-4 max-w-[85%] border-2 border-neo-black">
                            <p class="text-xs font-bold leading-relaxed">${text}</p>
                        </div>
                    `;
                } else {
                    div.innerHTML = `
                        <div class="bubble-bot p-4 max-w-[85%]">
                            <p class="text-xs font-bold leading-relaxed">${formatText(text)}</p>
                        </div>
                    `;
                }

                chatContainer.appendChild(div);
                scrollToBottom();
            }

            // 4. Simulated AI Engine
            function generateAIResponse(input) {
                const lowerInput = input.toLowerCase();

                if (lowerInput.includes('weather') || lowerInput.includes('rain')) {
                    return "Current weather in Rampur: 32¬∞C with 88% Humidity. üåßÔ∏è Heavy rain is expected tomorrow evening. Please delay fertilizer application.";
                }
                if (lowerInput.includes('price') || lowerInput.includes('mandi') || lowerInput.includes('rate')) {
                    return "üí∞ Mandi Rates (Rampur):\n‚Ä¢ Tomato: ‚Çπ3,200/qt\n‚Ä¢ Potato: ‚Çπ1,100/qt\n‚Ä¢ Wheat: ‚Çπ2,125/qt\n\nTomato prices are up by 15% since yesterday.";
                }
                if (lowerInput.includes('disease') || lowerInput.includes('yellow') || lowerInput.includes('blight')) {
                    return "For yellowing leaves or Blight, verify if it's fungal. ü©∫ \n\nRecommended: Spray Copper Oxychloride (3g/L). Ensure drainage in the field.";
                }
                if (lowerInput.includes('scheme') || lowerInput.includes('govt') || lowerInput.includes('subsidy')) {
                    return "Latest Scheme: **PM Kisan Samman Nidhi** 15th installment has been released. üèõÔ∏è \n\nAlso, 50% subsidy available on Drone rentals this month.";
                }
                if (lowerInput.includes('hello') || lowerInput.includes('hi')) {
                    return "Namaste! üôè How is your farm doing? Ask me about weather, prices, or crop health.";
                }
                
                // Default Fallback
                return "I am analyzing that... Could you please specify if you are asking about **Weather**, **Crop Prices**, or **Disease**?";
            }

            // Helper: Bold Formatting
            function formatText(text) {
                return text.replace(/\n/g, '<br>');
            }

            // 5. UI Utilities
            function showTyping() {
                typingIndicator.classList.remove('hidden');
                scrollToBottom();
            }

            function hideTyping() {
                typingIndicator.classList.add('hidden');
            }

            function scrollToBottom() {
                chatContainer.scrollTop = chatContainer.scrollHeight;
            }

            function handleEnter(e) {
                if (e.key === 'Enter') sendMessage();
            }

            function clearChat() {
                if(confirm("Clear conversation history?")) {
                    // Keep the welcome message, remove the rest (simple reset for demo)
                    location.reload(); 
                }
            }

            function triggerCamera() {
                document.getElementById('img-upload').click();
                // Simulate upload (Visual only)
                document.getElementById('img-upload').onchange = function() {
                    appendMessage('user', 'üì∑ [Image Uploaded]');
                    showTyping();
                    setTimeout(() => {
                        hideTyping();
                        appendMessage('bot', "I've analyzed the image. It looks like **Early Blight** on a Tomato leaf. \n\nSuggested Treatment: Apply Mancozeb 75 WP.");
                    }, 2000);
                };
            }

        </script>
    </body>
    </html>
